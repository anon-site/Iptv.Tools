<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ูุดุบู IPTV ุงููุชุทูุฑ - Advanced IPTV Player</title>
    
    <!-- Video.js CDN -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-tv"></i>
                <h1>ูุดุบู IPTV ุงูุงุญุชุฑุงูู</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-tab="player">
                    <i class="fas fa-play-circle"></i> ุงููุดุบู
                </button>
                <button class="nav-btn" data-tab="extractor">
                    <i class="fas fa-link"></i> ุงุณุชุฎุฑุงุฌ ุงูุฑูุงุจุท
                </button>
                <button class="nav-btn" data-tab="m3u-parser">
                    <i class="fas fa-list"></i> ูุญูู M3U
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Player Tab -->
            <div class="tab-content active" id="player-tab">
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-video"></i> ุงููุดุบู ุงูุงุญุชุฑุงูู
                    </h2>
                    
                    <div class="input-group">
                        <input type="text" 
                               id="stream-url" 
                               class="input-field" 
                               placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุจุซ ุงููุจุงุดุฑ (M3U8, MP4, RTMP, HLS, DASH...)">
                        <button class="btn btn-primary" id="play-btn">
                            <i class="fas fa-play"></i> ุชุดุบูู
                        </button>
                    </div>

                    <!-- Video Player Container -->
                    <div class="player-container" id="player-container">
                        <video id="main-player" 
                               class="video-js vjs-big-play-centered"
                               controls 
                               preload="auto"
                               width="100%"
                               height="300">
                            <p class="vjs-no-js">
                                ูุชุดุบูู ุงูููุฏููุ ูุฑุฌู ุชูุนูู JavaScript
                            </p>
                        </video>
                    </div>

                    <!-- Player Controls -->
                    <div class="player-controls">
                        <button class="control-btn" id="quality-btn" title="ุงูุฌูุฏุฉ">
                            <i class="fas fa-cog"></i> ุงูุฌูุฏุฉ
                        </button>
                        <button class="control-btn" id="subtitle-btn" title="ุงูุชุฑุฌูุฉ">
                            <i class="fas fa-closed-captioning"></i> ุงูุชุฑุฌูุฉ
                        </button>
                        <button class="control-btn" id="fullscreen-btn" title="ููุก ุงูุดุงุดุฉ">
                            <i class="fas fa-expand"></i> ููุก ุงูุดุงุดุฉ
                        </button>
                        <button class="control-btn" id="pip-btn" title="ุตูุฑุฉ ูู ุตูุฑุฉ">
                            <i class="fas fa-clone"></i> PIP
                        </button>
                    </div>
                </div>
            </div>

            <!-- Link Extractor Tab -->
            <div class="tab-content" id="extractor-tab">
                <!-- IPTV URL Parser -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-key"></i> ูุญูู ุฑูุงุจุท IPTV
                    </h2>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 12px 15px; border-radius: 8px; margin-bottom: 15px; color: white; font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> <strong>ุงุณุชุฎุฑุฌ Username ู Password ููุนูููุงุช ุงูุฎุงุฏู ูู ุฑุงุจุท IPTV</strong>
                    </div>
                    
                    <div class="input-group">
                        <input type="text" 
                               id="iptv-url" 
                               class="input-field" 
                               placeholder="ุฃุฏุฎู ุฑุงุจุท IPTV (ูุซุงู: http://server.tv:8080/live/user/pass/123.ts)">
                        <button class="btn btn-primary" id="parse-iptv-btn">
                            <i class="fas fa-search"></i> ุชุญููู
                        </button>
                    </div>
                    
                    <!-- IPTV Info Display -->
                    <div id="iptv-info" style="display: none; margin-top: 20px;">
                        <div style="background: rgba(15, 23, 42, 0.6); padding: 20px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.1);">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-server"></i> ูุนูููุงุช ุงูุฎุงุฏู
                            </h3>
                            
                            <div class="info-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ Server</strong>
                                    <span id="iptv-server" style="color: #f1f5f9; word-break: break-all;">-</span>
                                    <button onclick="copyText('iptv-server')" style="margin-top: 5px; padding: 4px 8px; background: var(--dark-hover); border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.8rem;">
                                        <i class="fas fa-copy"></i> ูุณุฎ
                                    </button>
                                </div>
                                
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ Port</strong>
                                    <span id="iptv-port" style="color: #f1f5f9;">-</span>
                                </div>
                                
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ค Username</strong>
                                    <span id="iptv-username" style="color: #10b981; font-weight: bold;">-</span>
                                    <button onclick="copyText('iptv-username')" style="margin-top: 5px; padding: 4px 8px; background: var(--dark-hover); border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.8rem;">
                                        <i class="fas fa-copy"></i> ูุณุฎ
                                    </button>
                                </div>
                                
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ Password</strong>
                                    <span id="iptv-password" style="color: #f59e0b; font-weight: bold;">-</span>
                                    <button onclick="copyText('iptv-password')" style="margin-top: 5px; padding: 4px 8px; background: var(--dark-hover); border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.8rem;">
                                        <i class="fas fa-copy"></i> ูุณุฎ
                                    </button>
                                </div>
                                
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ฌ Stream Type</strong>
                                    <span id="iptv-stream-type" style="color: #8b5cf6;">-</span>
                                </div>
                                
                                <div class="info-item" style="background: rgba(30, 41, 59, 0.6); padding: 12px; border-radius: 8px;">
                                    <strong style="color: #94a3b8; font-size: 0.85rem; display: block; margin-bottom: 5px;">๐ Stream ID</strong>
                                    <span id="iptv-stream-id" style="color: #3b82f6;">-</span>
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 8px;">
                                <h4 style="color: #10b981; margin: 0 0 10px 0; font-size: 0.95rem;">๐ ุฑูุงุจุท API ูููุฏุฉ</h4>
                                <div style="display: flex; flex-direction: column; gap: 8px;">
                                    <div>
                                        <strong style="color: #cbd5e1; font-size: 0.85rem;">Player API:</strong>
                                        <code id="iptv-player-api" style="background: rgba(0,0,0,0.3); padding: 6px 10px; border-radius: 4px; display: block; margin-top: 5px; color: #10b981; font-size: 0.85rem; word-break: break-all;">-</code>
                                        <button onclick="copyText('iptv-player-api')" style="margin-top: 5px; padding: 6px 12px; background: #10b981; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                            <i class="fas fa-copy"></i> ูุณุฎ Player API
                                        </button>
                                    </div>
                                    
                                    <div>
                                        <strong style="color: #cbd5e1; font-size: 0.85rem;">M3U Playlist:</strong>
                                        <code id="iptv-m3u-url" style="background: rgba(0,0,0,0.3); padding: 6px 10px; border-radius: 4px; display: block; margin-top: 5px; color: #f59e0b; font-size: 0.85rem; word-break: break-all;">-</code>
                                        <button onclick="copyText('iptv-m3u-url')" style="margin-top: 5px; padding: 6px 12px; background: #f59e0b; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                            <i class="fas fa-copy"></i> ูุณุฎ M3U URL
                                        </button>
                                    </div>
                                    
                                    <div id="iptv-m3u8-container" style="display: none;">
                                        <strong style="color: #cbd5e1; font-size: 0.85rem;">๐บ M3U8 Stream URL (ููุชุดุบูู ุงููุจุงุดุฑ):</strong>
                                        <code id="iptv-m3u8-stream" style="background: rgba(0,0,0,0.3); padding: 6px 10px; border-radius: 4px; display: block; margin-top: 5px; color: #06b6d4; font-size: 0.85rem; word-break: break-all;">-</code>
                                        <div style="display: flex; gap: 8px; margin-top: 5px;">
                                            <button onclick="copyText('iptv-m3u8-stream')" style="flex: 1; padding: 6px 12px; background: #06b6d4; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                                <i class="fas fa-copy"></i> ูุณุฎ M3U8
                                            </button>
                                            <button onclick="playM3U8Stream()" style="flex: 1; padding: 6px 12px; background: #8b5cf6; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                                <i class="fas fa-play"></i> ุชุดุบูู ุงูุขู
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div id="iptv-ts-container" style="display: none;">
                                        <strong style="color: #cbd5e1; font-size: 0.85rem;">๐ก TS Stream URL (ุตูุบุฉ ุจุฏููุฉ):</strong>
                                        <code id="iptv-ts-stream" style="background: rgba(0,0,0,0.3); padding: 6px 10px; border-radius: 4px; display: block; margin-top: 5px; color: #ec4899; font-size: 0.85rem; word-break: break-all;">-</code>
                                        <div style="display: flex; gap: 8px; margin-top: 5px;">
                                            <button onclick="copyText('iptv-ts-stream')" style="flex: 1; padding: 6px 12px; background: #ec4899; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                                <i class="fas fa-copy"></i> ูุณุฎ TS
                                            </button>
                                            <button onclick="playTSStream()" style="flex: 1; padding: 6px 12px; background: #8b5cf6; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.85rem; font-weight: bold;">
                                                <i class="fas fa-play"></i> ุชุดุบูู ุงูุขู
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Original Link Extractor -->
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-link"></i> ุงุณุชุฎุฑุงุฌ ุงูุฑูุงุจุท ูู ุงูููุงูุน
                    </h2>
                    
                    <div class="input-group">
                        <input type="text" 
                               id="page-url" 
                               class="input-field" 
                               placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุตูุญุฉ (ูุซู: aflam4you.net, elahmad.com...)">
                        <button class="btn btn-secondary" id="extract-btn">
                            <i class="fas fa-search"></i> ุงุณุชุฎุฑุงุฌ
                        </button>
                    </div>

                    <!-- Extraction Results -->
                    <div class="results-container" id="extraction-results">
                        <div class="empty-state">
                            <i class="fas fa-info-circle"></i>
                            <p>ูู ุจุฅุฏุฎุงู ุฑุงุจุท ุงูุตูุญุฉ ูุงุณุชุฎุฑุงุฌ ุฑูุงุจุท ุงูุจุซ ุงููุจุงุดุฑ</p>
                        </div>
                    </div>

                    <!-- Extracted Links List -->
                    <div class="links-list" id="extracted-links"></div>
                </div>
            </div>

            <!-- M3U Parser Tab -->
            <div class="tab-content" id="m3u-parser-tab">
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="fas fa-list"></i> ูุญูู ููุงุฆู M3U
                    </h2>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 12px 15px; border-radius: 8px; margin-bottom: 15px; color: white; font-size: 0.9rem;">
                        <i class="fas fa-magic"></i> <strong>ููุฒุฉ ุฐููุฉ:</strong> ูุญุงูู ุงููุธุงู ุนุจุฑ 8 ุทุฑู ูุฎุชููุฉ ูุชุญููู ุงูุฑุงุจุท ุชููุงุฆูุงู! <span style="opacity: 0.8;">(ููุชูุฒูู ุงููุฏูู: <i class="fas fa-save"></i>)</span>
                    </div>
                    
                    <div class="input-group">
                        <input type="text" 
                               id="m3u-url" 
                               class="input-field" 
                               placeholder="ุฃุฏุฎู ุฑุงุจุท ูุงุฆูุฉ M3U ุฃู ูู ุจุฑูุน ููู">
                        <button class="btn btn-success" id="parse-m3u-btn">
                            <i class="fas fa-download"></i> ุชุญููู
                        </button>
                        <button class="btn btn-secondary" id="download-m3u-btn" title="ุชูุฒูู ุงูููู ูุฏููุงู">
                            <i class="fas fa-save"></i>
                        </button>
                    </div>
                    
                    <div class="file-upload-section">
                        <label for="m3u-file-input" class="file-upload-label">
                            <i class="fas fa-upload"></i>
                            <span>ุฑูุน ููู M3U ูู ุฌูุงุฒู</span>
                            <input type="file" id="m3u-file-input" accept=".m3u,.m3u8,.txt" style="display: none;">
                        </label>
                        <span class="file-name" id="file-name-display"></span>
                    </div>

                    <!-- M3U Controls -->
                    <div class="m3u-controls" id="m3u-controls" style="display: none;">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" 
                                   id="channel-search" 
                                   placeholder="ุงุจุญุซ ุนู ููุงุฉ..."
                                   class="search-input">
                        </div>
                        
                        <div class="filter-buttons">
                            <button class="filter-btn" id="check-channels-btn">
                                <i class="fas fa-check-circle"></i> ูุญุต ุงููููุงุช
                            </button>
                            <button class="filter-btn" id="hide-offline-btn">
                                <i class="fas fa-eye-slash"></i> ุฅุฎูุงุก ุงููุนุทูุฉ
                            </button>
                            <button class="filter-btn" id="show-all-btn">
                                <i class="fas fa-eye"></i> ุนุฑุถ ุงููู
                            </button>
                            <button class="filter-btn" id="view-playlist-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-list-ul"></i> ูุงุฆูุชู (<span id="playlist-count">0</span>)
                            </button>
                            <button class="filter-btn" id="export-btn">
                                <i class="fas fa-file-export"></i> ุชุตุฏูุฑ M3U
                            </button>
                        </div>

                        <div class="stats">
                            <span class="stat-item">
                                <i class="fas fa-tv"></i> 
                                ุงูุฅุฌูุงูู: <strong id="total-channels">0</strong>
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-check"></i> 
                                ุชุนูู: <strong id="working-channels">0</strong>
                            </span>
                            <span class="stat-item">
                                <i class="fas fa-times"></i> 
                                ูุนุทูุฉ: <strong id="offline-channels">0</strong>
                            </span>
                        </div>
                    </div>

                    <!-- Channels Grid -->
                    <div class="channels-grid" id="channels-grid"></div>

                    <!-- Loading Indicator -->
                    <div class="loading" id="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>ุฌุงุฑู ุงูุชุญููู...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for Video Player -->
    <div class="modal" id="video-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">
                    <i class="fas fa-tv"></i> 
                    <span id="channel-name">ุงุณู ุงูููุงุฉ</span>
                </h3>
                <button class="close-btn" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- IPTV Warning -->
                <div class="iptv-warning" style="display: none;" id="iptv-warning">
                    <div style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: white; margin: 0 0 10px 0; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-exclamation-triangle"></i>
                            ูุง ุชุนูู ุงูููุงุฉุ ุงุณุชุฎุฏู VLC!
                        </h4>
                        <p style="color: white; margin: 0 0 10px 0; font-size: 0.95rem;">
                            โก ุฑูุงุจุท IPTV ูุง ุชุนูู ูู ุงููุชุตูุญ ุจุณุจุจ ูููุฏ ุงูุฃูุงู
                        </p>
                        <button onclick="downloadSingleChannel()" style="background: white; color: #ff6b35; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-download"></i>
                            ุญููู ููู M3U ูุงูุชุญู ูู VLC
                        </button>
                    </div>
                </div>
                
                <!-- Channel Info -->
                <div class="channel-info">
                    <div class="info-item">
                        <strong>ุงููุฆุฉ:</strong>
                        <span id="channel-category">-</span>
                    </div>
                    <div class="info-item">
                        <strong>ุงูุฑุงุจุท:</strong>
                        <span id="channel-url" class="url-text">-</span>
                        <button class="copy-btn" id="copy-url-btn" title="ูุณุฎ ุงูุฑุงุจุท">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>

                <!-- Modal Player -->
                <div class="modal-player-container">
                    <video id="modal-player" 
                           class="video-js vjs-big-play-centered"
                           controls 
                           preload="auto"
                           width="100%"
                           height="500">
                    </video>
                </div>
            </div>
        </div>
    </div>

    <!-- Playlist Modal -->
    <div class="modal" id="playlist-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-list-ul"></i> 
                    <span>ูุงุฆูุฉ ุงูุชุดุบูู ุงููุฎุตุตุฉ</span>
                </h3>
                <button class="close-btn" id="close-playlist-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="playlist-info" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 15px; border-radius: 10px; margin-bottom: 20px; color: white;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0 0 5px 0;">๐ต ูููุงุชู ุงูููุถูุฉ</h4>
                            <p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">ุฅุฌูุงูู: <strong id="my-playlist-total">0</strong> ููุงุฉ</p>
                        </div>
                        <div>
                            <button onclick="exportMyPlaylist()" style="background: white; color: #f5576c; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-left: 10px;">
                                <i class="fas fa-download"></i> ุชุตุฏูุฑ M3U
                            </button>
                            <button onclick="clearPlaylist()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                <i class="fas fa-trash"></i> ูุณุญ ุงููู
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="my-playlist-grid" class="channels-grid">
                    <div class="empty-state" style="text-align: center; padding: 40px; color: #999;">
                        <i class="fas fa-folder-open" style="font-size: 48px; margin-bottom: 15px;"></i>
                        <p>ูุง ุชูุฌุฏ ูููุงุช ูู ูุงุฆูุชู</p>
                        <p style="font-size: 0.9rem;">ุงุถุบุท ุนูู "ุฅุถุงูุฉ" ูู ุฃู ููุงุฉ ูุฅุถุงูุชูุง</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>ยฉ 2025 ูุดุบู IPTV ุงููุชุทูุฑ - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
            <div class="footer-links">
                <a href="#"><i class="fab fa-github"></i> GitHub</a>
                <a href="#"><i class="fas fa-info-circle"></i> ุญูู</a>
                <a href="#"><i class="fas fa-envelope"></i> ุงุชุตู ุจูุง</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/extractor.js"></script>
    <script src="js/m3u-parser.js"></script>
    <script src="js/player.js"></script>
</body>
</html>
